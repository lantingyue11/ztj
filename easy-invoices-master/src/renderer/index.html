<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>投屏</title>
</head>
<style>


</style>
<body>
<div id="app">
<v-scren></v-scren>

</div>
</body>

<script>



  const ipcRenderer = require('electron').ipcRenderer;

  window.onload = function() {
    getMessage();
    function getMessage() {
      ipcRenderer.on('imgUploadMsgFromMain', (event, msg) => {
        if(msg.person == 1){
          document.getElementById('blue_grade').innerText = msg.point;
        }else{
          document.getElementById('red_grade').innerText = msg.point;
        }
      });
    };

  }

  var ifCutOff = false;
  TimeDown("show", 90);


  function TimeDown(id, diffTime) {
    //当前时间
    var nowDate = new Date();
    //相差的总秒数
    var totalSeconds = diffTime;
    //天数
    var days = Math.floor(totalSeconds / (60 * 60 * 24));
    //取模（余数）
    var modulo = totalSeconds % (60 * 60 * 24);
    //小时数
    var hours = Math.floor(modulo / (60 * 60));
    modulo = modulo % (60 * 60);
    //分钟
    var minutes = Math.floor(modulo / 60);
    //秒
    var seconds = modulo % 60;
    //输出到页面
    document.getElementById(id).innerHTML =  minutes + ":" + seconds;
    //延迟一秒执行自己
    setTimeout(function () {
      if(!ifCutOff && diffTime > 0){
        diffTime = diffTime-1;
        TimeDown(id, diffTime);
      }

    }, 1000)
  }

  // 使用httpVueLoader,引入scren组件
  Vue.use(httpVueLoader);

  new Vue({
      el: '#app',
      data: function () {
          return { visible: false }
      },
      components: {
          // 将组建加入组建库
          'v-scren': 'url:./pages/menu/v-scren.vue'
      }
  })


</script>



</html>
